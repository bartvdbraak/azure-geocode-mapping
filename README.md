<h1 align="center">
    <picture>
        <source media="(prefers-color-scheme: dark)" srcset="https://user-images.githubusercontent.com/3996360/233224872-64dfd633-806c-445b-adb4-0e71c6277684.svg">
        <source media="(prefers-color-scheme: light)" srcset="https://user-images.githubusercontent.com/3996360/233224873-eeab0b61-3162-4b25-a0c8-2fbb4e8601c6.svg">
        <img src="https://user-images.githubusercontent.com/3996360/233224872-64dfd633-806c-445b-adb4-0e71c6277684.svg" alt="Cluster" width="60%">
    </picture>
</h1>

`azure-geocode-mapping` is a Python package that generates a mapping of Azure regions to their display names and geocodes.

## Installation

To install `azure-geocode-mapping`, you can use Poetry by running:

```bash
poetry install
```

## Usage

First off, we need the input files to be created in the `data` directory:

```bash
./data.sh
```

You can generate the mapping by running the following command:
```bash
poetry run azure-geocode-mapping
# or
poetry run python -m geomapper.mapping
```

This will create a JSON file `data/geo.mapping.json` that contains the Azure region mapping.

You can also import the `create_azure_mapping` function from the `geomapper.mapping` module and use it in your own code:

```python
from geomapper.mapping import create_azure_mapping

mapping = create_azure_mapping()
```

## Data

This package uses two data files to generate the mapping:

- `data/azure-regions.json`: a JSON file containing the list of Azure regions and their aliases.
- `data/azure-geocodes.xml`: an XML file containing the list of Azure regions and their geocodes.

These files are generated by `data.sh` into the `data/` directory. Examples of their structure is also mimicked in the files from `test/data`.

## Tests

This package comes with a set of unit tests that can be run using [`pytest`](https://pytest.org/). To run the tests, install the `dev` dependencies by running:

```bash
poetry install --with test
```

Then, run the tests using:

```bash
pytest tests/
```

## Contributing

Contributions are welcome! Please see [CONTRIBUTING.md](CONTRIBUTING.md) for more information.

## License

`azure-geocode-mapping` is distributed under the MIT License. See the [LICENSE](LICENSE) file for more information.
